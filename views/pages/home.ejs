<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Pro Manager</title>
    <!-- BOOTSTRAP 5.3.0 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
      integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
      crossorigin="anonymous"
    ></script>
  </head>
  <body
    class="d-flex vh-100 text-center text-bg-dark"
    style="background-color: #333333"
  >
    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
      <header class="mb-auto">
        <nav
          class="navbar navbar-expand-lg bg-body-tertiary"
          data-bs-theme="light"
        >
          <div class="container-fluid">
            <a class="navbar-brand" href="/">TP - Contact Pro Manager</a>
          </div>
        </nav>
      </header>

      <!-- PROJET -->
      <div class="p-5">
        <div class="row">
          <div class="col-12 card shadow mx-auto mt-5 p-4">
            <div class="card-header text-center bg-dark text-light">
              <h3 class="text-uppercase">Mes contacts</h3>
            </div>
            <!-- Ajout d'un nouveau contact -->
            <div class="my-4">
              <a href="/contact/add" class="btn btn-outline-primary"
                >Ajouter un nouveau contact</a
              >
            </div>
            <!-- Tableau contenant toutes les données respectivement récupérer depuis la base de donnée -->
            <div class="card-content table-responsive">
              <table
                class="table table-bordered border-dark table-sm table-secondary table-hover table-striped"
              >
                <caption>
                  Liste des contacts
                </caption>
                <thead class="table-dark">
                  <tr class="align-middle">
                    <th scope="col">Nom</th>
                    <th scope="col">Prénom</th>
                    <th scope="col">Société</th>
                    <th scope="col">Adresse</th>
                    <th scope="col">Téléphone</th>
                    <th scope="col">Secteur</th>
                    <th scope="col">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="my-1">Nicolas</td>
                    <td class="my-1">Richard</td>
                    <td class="my-1">Campus Région</td>
                    <td class="my-1">78 Rte de Paris, 69260 Charbonnières</td>
                    <td class="my-1">04 26 73 66 76</td>
                    <td class="my-1">Education</td>
                    <td class="d-flex justify-content-around">
                      <a
                        href="/contact/show/1"
                        id="a-show-1"
                        class="btn btn-success btn-sm"
                        >Voir</a
                      >
                      <a
                        href="/contact/edit/1"
                        id="a-edit-1"
                        class="btn btn-warning btn-sm"
                        >Editer</a
                      >
                      <button
                        id="btn-delete-1"
                        data-id="1"
                        class="btn btn-danger btn-delete btn-sm"
                      >
                        Supprimer
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <footer class="mt-auto text-white-50 d-flex justify-content-around">
        <p>Copyright &copy; - 2023</p>
        <p class="text-secondary">
          by <span class="text-info">Alain GUILLON</span> -
          <span class="text-warning">DFS26C</span>
        </p>
      </footer>
    </div>

    <script>
      let btnDeletes = document.querySelectorAll(".btn-delete");

      btnDeletes.forEach((btnDelete) => {
        // ajoute l'évènement click sur chaque bouton
        btnDelete.addEventListener("click", (e) => {
          if (window.confirm("Voulez vous supprimer ce contact ?")) {
            // redirige vers l'url /contact/delete/id
            window.location.href = `/contact/delete/${btnDelete.getAttribute(
              "data-id"
            )}`;
          }
        });
      });
    </script>
  </body>
</html>
